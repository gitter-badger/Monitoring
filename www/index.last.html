<!doctype html>
<html>
	<head>
		<title>Bar Chart</title>
		<script src="chartjs.js"></script>
	</head>
	<body>
		<div style="width: 50%">
			<canvas id="canvas" height="450" width="600"></canvas>
		</div>


	<script>
	var randomScalingFactor = function(){ return Math.round(Math.random()*100)};
	var barChartData = {
		labels : [],
		datasets : [
      {
				strokeColor : "rgba(173,0,0,0.5)",
				fillColor : "rgba(3, 169, 244,0.1)",
				highlightFill: "rgba(173,0,0,0.75)",
				highlightStroke: "rgba(173,0,0,1)",
				data : []
			},

      {
				strokeColor : "rgba(0, 179, 56,0.5)",
				fillColor : "rgba(3, 169, 244,0.1)",
				highlightFill: "rgba(0, 179, 56,0.75)",
				highlightStroke: "rgba(0, 179, 56,1)",
				data : []
			}
		]
	}
	window.onload = function(){
		var ctx = document.getElementById("canvas").getContext("2d");
		window.myBar = new Chart(ctx).Line(barChartData, {
      animation: false,
       bezierCurve : false,
       scaleOverride : true,
         scaleSteps : 25,
         scaleStepWidth : 4,
         scaleStartValue : 0

		});
	}
	</script>
  <script src="http://127.0.0.1:8156/socket.io/socket.io.js"></script>




  <script>
    var socket = io('http://127.0.0.1:8156/');
    var nb=0;
		window.socketio = socket;
		socket.emit('room', { room : 'client'})
    socket.on('data', function (data) {
      console.log("yah", data);
      //window.myBar.datasets[0].bars.push(data.cpuAverage);
      //barChartData.datasets[0].data.push(data.cpuAverage)
      /*console.log(data.cpuAverage);
      nb++;
      if (nb>20) {
	      window.myBar.removeData();
	    }

    var Datea = new Date();

      window.myBar.addData([data.cpuAverage, data.mempourcent],
        Datea.getHours()+"h"+Datea.getMinutes()+":"+Datea.getSeconds())
*/
      //window.myBar.update();
    });

    socket.on('connect', function () {
      console.log('hiu');
      socket.emit('listenData', {});
    });

    </script>
</body>
